//Download Ubuntu Classic Server 16.04 for Raspberry Pi at https://ubuntu-pi-flavour-maker.org/download/

//Flash image on microSD card with Win32DiskImager

//Insert microSD in Raspberry Pi and boot device. Make sure the Raspberry Pi is connected to a monitor and a router with internet access.

//Standard username and password is ubuntu

//ssh into Raspberry Pi
ssh ubuntu@192.168.1.12

//Get ubuntu ready
sudo su
apt-get update && apt-get upgrade -y

//Copy asterisk, dahdi, libpri and install_prereq to a folder. These files are stored on Google Drive.
cd /home
mkdir asterisk

//run script install_prereq
chmod 777 install_prereq
./install_prereq install
./install_prereq install-unpackaged

//Install DAHDI
//wget https://downloads.asterisk.org/pub/telephony/dahdi-linux-complete/dahdi-linux-complete-current.tar.gz
cd /home/asterisk
tar -zxvf dahdi-linux-complete-current.tar.gz
cd dahdi-linux-complete-2.11.1+2.11.1
make
make install
make config

//Install libpri
//wget https://downloads.asterisk.org/pub/telephony/libpri/libpri-current.tar.gz
cd /home/asterisk
tar -zxvf libpri-current.tar.gz
cd libpri-1.6.0
make
make install

//Install Asterisk
//wget https://downloads.asterisk.org/pub/telephony/asterisk/asterisk-14-current.tar.gz
cd /home/asterisk
tar -zxvf asterisk-14-current.tar.gz
cd asterisk-14.4.1
./configure --with-pjproject-bundled
make
make install
make samples
make config

//Start asterisk
service asterisk start
asterisk -rvvvvv

//Install openvpn
sudo apt-get install openvpn

//Install htop
sudo apt-get install htop

//Install mailx
apt install mailutils

//Enable wireless network
ifconfig wlan0 up
sudo iwconfig wlan0 essid TPG-WZ4Q key s:yourpass
sudo dhclient wlan0

//Copy m2mob.sh, ma2mob.sh and mmp3.sh to /var/lib/asterisk/agi-bin/. Files are stored in this repository.

//Change ownership to user on which Asterisk runs
chown sudo:sudo /var/lib/asterisk/agi-bin -R
chmod 755 /var/lib/asterisk/agi-bin/m2mob.sh

//Remove the installation files
rm -r /home/asterisk
