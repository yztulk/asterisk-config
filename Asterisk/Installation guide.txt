//See here for an overview of all RPi images: http://elinux.org/RPi_Distributions#Raspbian_Server_Edition
//Flash image on microSD card with Win32DiskImager
//Insert microSD in Raspberry Pi and boot device. Make sure the Raspberry Pi is connected to a monitor and a router with internet access.
//Default username and password is ubuntu

//ssh into Raspberry Pi
ssh root@192.168.1.12

cd /home
mkdir asterisk
sudo chown ubuntu:ubuntu /home/asterisk -R

//Copy asterisk and install_prereq to /home/asterisk. These files are stored on Google Drive.

//run script install_prereq
cd /home/asterisk
chmod 777 install_prereq
./install_prereq install

//Continue installation
./install_prereq install-unpackaged

//Install Asterisk
//wget https://downloads.asterisk.org/pub/telephony/asterisk/asterisk-14-current.tar.gz
cd /home/asterisk
tar -zxvf asterisk-14-current.tar.gz
cd asterisk-14.4.1
./configure --with-pjproject-bundled
make
make install
make samples
make config

//Start asterisk
service asterisk start
asterisk -rvvvvv

//Remove the installation files
rm -r /home/asterisk

//Install openvpn
apt-get install openvpn -y

//Install htop
apt-get install htop -y

//Install mailx
apt install mailutils -y

//Install and configure dnsmasq for local DNS chaching (https://help.ubuntu.com/community/Dnsmasq)
sudo apt-get install dnsmasq -y
sudo apt-get install dnsutils -y
nano /etc/dnsmasq.conf
Change #listen-address= to listen-address=127.0.0.1
nano /etc/dhcp/dhclient.conf

Make sure config looks like this
#supersede domain-name "fugue.com home.vix.com";
prepend domain-name-servers 127.0.0.1;
request subnet-mask, broadcast-address, time-offset, routers,
domain-name, domain-name-servers, host-name,
netbios-name-servers, netbios-scope;

sudo /etc/init.d/dnsmasq restart
dig ubuntu.com //Query time: 117 msec
dig ubuntu.com //Query time: 1 msec

//Enable wireless network
ifconfig wlan0 up
sudo iwconfig wlan0 essid TPG-WZ4Q key s:yourpass
sudo dhclient wlan0
